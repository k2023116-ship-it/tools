<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Image/Text ‚Üí Math Answer (Gemini Vision + OCR)</title>

<!-- Tesseract for optional OCR -->
<script src="https://cdn.jsdelivr.net/npm/tesseract.js@5/dist/tesseract.min.js"></script>
<!-- MathJax for LaTeX rendering (nice steps/equations) -->
<script>
  window.MathJax = { tex: {inlineMath: [['$', '$'], ['\\(', '\\)']]} };
</script>
<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js" id="MathJax-script" async></script>

<style>
  :root{--bg:#0d1117;--card:#161b22;--text:#e6edf3;--muted:#9ca3af;--primary:#58a6ff;--ok:#2ea043;--warn:#f59e0b;--border:#30363d}
  
  /* Dark mode variables */
  :root {
    --bg: #0d1117;
    --card: #161b22;
    --text: #e6edf3;
    --muted: #9ca3af;
    --primary: #58a6ff;
    --ok: #2ea043;
    --warn: #f59e0b;
    --border: #30363d;
    --accent: #58a6ff;
    --accent-light: rgba(88, 166, 255, 0.1);
    --success: #2ea043;
    --success-light: rgba(46, 160, 67, 0.1);
    --warning: #f59e0b;
    --warning-light: rgba(245, 158, 11, 0.1);
    --info: #58a6ff;
    --info-light: rgba(88, 166, 255, 0.1);
  }
  
  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);color:var(--text);font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Arial}
  header{padding:22px 16px;text-align:center;background:linear-gradient(180deg, var(--accent-light), transparent)}
  h1{margin:0;color:var(--primary);font-size:28px}
  main{max-width:1100px;margin:16px auto;padding:16px}
  .grid{display:grid;grid-template-columns:1fr 1fr;gap:16px}
  @media (max-width:1000px){.grid{grid-template-columns:1fr}}
  .card{background:var(--card);border:1px solid var(--border);border-radius:14px;padding:16px;box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)}
  .row{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
  .btn{background:var(--card);color:var(--text);border:1px solid var(--border);border-radius:10px;padding:10px 14px;cursor:pointer;font-weight:600;transition: all 0.2s ease}
  .btn:hover{background:var(--accent-light);border-color:var(--accent)}
  .btn.primary{background:var(--primary);color:#fff;border-color:transparent}
  .btn.primary:hover{background:var(--accent);transform: translateY(-1px)}
  .btn.ok{background:var(--ok);border-color:transparent;color: #fff}
  .btn.ok:hover{background:var(--success);transform: translateY(-1px)}
  .btn.warn{background:var(--warn);color:#fff;border-color:transparent}
  .btn.warn:hover{background:var(--warning);transform: translateY(-1px)}
  .hint{color:var(--muted);font-size:12px}
  textarea{width:100%;min-height:160px;border:1px solid var(--border);border-radius:10px;background:var(--card);color:var(--text);padding:10px;resize:vertical;transition: border-color 0.2s ease}
  textarea:focus{border-color:var(--accent);outline: none}
  .out{white-space:pre-wrap;line-height:1.6;border:1px solid var(--border);border-radius:10px;padding:12px;background:var(--card);min-height:140px}
  .badge{display:inline-block;border:1px solid var(--border);border-radius:999px;padding:6px 10px;margin-right:6px;background:var(--accent-light);color:var(--accent);font-size:12px;font-weight: 500}
  .preview{max-width:100%;border:1px dashed var(--border);border-radius:10px;margin-top:8px}
  select,input[type="number"]{background:var(--card);color:var(--text);border:1px solid var(--border);border-radius:10px;padding:10px 12px;width:100%;transition: border-color 0.2s ease}
  select:focus,input[type="number"]:focus{border-color:var(--accent);outline: none}
  label{display:block;margin:8px 0 6px;color:var(--text);font-weight: 500}
  .flex-2{display:flex;gap:10px}
  .flex-2 > div{flex:1}
  

  

</style>
</head>
<body>

  
  <header>
    <h1>üì∑‚ûú‚úÖ Solve Questions from Text or Diagrams (Gemini Vision)</h1>
    <p class="hint">Paste text or upload a photo/diagram. Get a step-by-step solution. No UI exposure of API key.</p>
  </header>

  <main>
    <div class="grid">
      <!-- LEFT: INPUTS -->
      <section class="card">
        <h3>Input</h3>
        <label>Paste question (optional)</label>
        <textarea id="textInput" placeholder="Paste your math/question text here..."></textarea>

        <div class="flex-2">
          <div>
            <label>Upload image/diagram (optional)</label>
            <input type="file" id="fileInput" accept="image/*" class="btn" />
          </div>
          <div>
            <label>Mode</label>
            <select id="mode">
              <option value="auto" selected>Auto (prefer Vision if image present)</option>
              <option value="vision">Vision only (image ‚Üí answer)</option>
              <option value="ocr">OCR + Gemini (image ‚Üí text ‚Üí answer)</option>
              <option value="text">Text only (paste ‚Üí answer)</option>
            </select>
          </div>
        </div>

        <img id="preview" class="preview" alt="" />

        <div class="row" style="margin-top:10px">
          <span class="badge" id="imgBadge">Image: none</span>
          <span class="badge" id="ocrBadge">OCR: idle</span>
          <span class="badge" id="modelBadge">Gemini: idle</span>
        </div>

        <div class="row" style="margin-top:10px">
          <button class="btn primary" id="btnSolve">Solve</button>
          <button class="btn" id="btnClear">Clear</button>
          <button class="btn ok" id="btnCopy">Copy Answer</button>
        </div>

        <p class="hint">Tips: For geometry/graphs, use <b>Vision</b>. For blurry text, try <b>OCR+Gemini</b>.</p>
      </section>

      <!-- RIGHT: OUTPUTS -->
      <section class="card">
        <h3>Answer</h3>
        <div id="answer" class="out">‚ö° Your solution will appear here‚Ä¶</div>

        <h3 style="margin-top:18px">(Optional) Extracted Text (OCR)</h3>
        <div id="ocrText" class="out" style="min-height:100px">‚Äì</div>
      </section>
    </div>

    <!-- SEO-Friendly FAQ and Information Section -->
    <section style="margin-top: 60px; padding: 40px 0; border-top: 1px solid var(--border);">
      <div style="text-align: center; margin-bottom: 40px;">
        <h2 style="font-size: 2.2rem; color: var(--text); margin-bottom: 16px;">‚ùì Frequently Asked Questions & How to Use Quiz Solver</h2>
        <p style="color: var(--muted); font-size: 1.1rem; max-width: 800px; margin: 0 auto;">Everything you need to know about using the Quiz Solver tool effectively for solving math problems, analyzing diagrams, and getting step-by-step solutions.</p>
      </div>

      <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 24px; margin-bottom: 50px;">
        <div style="background: var(--info-light); border: 1px solid var(--info); padding: 24px; border-radius: 16px;">
          <h3 style="color: var(--info); margin-bottom: 16px;">‚ùì What is Quiz Solver?</h3>
          <p style="color: var(--text); margin-bottom: 16px;">Quiz Solver is an AI-powered tool that combines Google's Gemini Vision technology with OCR to solve complex problems from images, diagrams, and text. It provides detailed, step-by-step solutions for math, science, and academic questions.</p>
          <ul style="color: var(--muted); margin: 0; padding-left: 20px;">
            <li>AI-powered problem solving</li>
            <li>Image and diagram analysis</li>
            <li>Step-by-step explanations</li>
            <li>Multiple input modes</li>
          </ul>
        </div>

        <div style="background: var(--success-light); border: 1px solid var(--success); padding: 24px; border-radius: 16px;">
          <h3 style="color: var(--success); margin-bottom: 16px;">üîí How does privacy work?</h3>
          <p style="color: var(--text); margin-bottom: 16px;">All processing happens through secure Google Gemini APIs. Your images and text are not stored permanently on our servers, ensuring complete privacy and security for your personal and professional work.</p>
          <ul style="color: var(--muted); margin: 0; padding-left: 20px;">
            <li>No permanent storage</li>
            <li>Secure API communication</li>
            <li>Local OCR processing</li>
            <li>Complete data privacy</li>
          </ul>
        </div>

        <div style="background: var(--warning-light); border: 1px solid var(--warning); padding: 24px; border-radius: 16px;">
          <h3 style="color: var(--warning); margin-bottom: 16px;">‚ö° Why is it so fast?</h3>
          <p style="color: var(--text); margin-bottom: 16px;">Our tool uses optimized AI models and efficient processing. Vision mode directly analyzes images, while OCR mode quickly extracts text for faster problem-solving without waiting in queues.</p>
          <ul style="color: var(--muted); margin: 0; padding-left: 20px;">
            <li>Optimized AI models</li>
            <li>Direct image analysis</li>
            <li>Fast OCR processing</li>
            <li>No server delays</li>
          </ul>
        </div>
      </div>

      <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 24px; margin-bottom: 50px;">
        <div style="background: var(--card); border: 1px solid var(--border); border-radius: 14px; padding: 24px; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);">
          <h3 style="color: var(--primary); margin-bottom: 16px;">üéØ Perfect for Students</h3>
          <p style="color: var(--text); margin-bottom: 16px;">Get immediate help with homework problems, understand complex concepts through visual analysis, and learn problem-solving techniques step by step.</p>
          <ul style="color: var(--muted); margin: 16px 0 0 20px;">
            <li>Math homework assistance</li>
            <li>Science diagram analysis</li>
            <li>Step-by-step learning</li>
            <li>24/7 tutoring access</li>
          </ul>
        </div>

        <div style="background: var(--card); border: 1px solid var(--border); border-radius: 14px; padding: 24px; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);">
          <h3 style="color: var(--primary); margin-bottom: 16px;">üíº Business Professionals</h3>
          <p style="color: var(--text); margin-bottom: 16px;">Analyze complex diagrams, extract text from documents, and solve technical problems efficiently for research, training, and problem-solving needs.</p>
          <ul style="color: var(--muted); margin: 16px 0 0 20px;">
            <li>Research diagram analysis</li>
            <li>Document text extraction</li>
            <li>Technical problem solving</li>
            <li>Training material creation</li>
          </ul>
        </div>

        <div style="background: var(--card); border: 1px solid var(--border); border-radius: 14px; padding: 24px; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);">
          <h3 style="color: var(--primary); margin-bottom: 16px;">üé® Content Creators</h3>
          <p style="color: var(--text); margin-bottom: 16px;">Create educational materials, analyze visual content, and generate step-by-step solutions for blogs, tutorials, and educational platforms.</p>
          <ul style="color: var(--muted); margin: 16px 0 0 20px;">
            <li>Educational content creation</li>
            <li>Visual problem analysis</li>
            <li>Step-by-step tutorials</li>
            <li>Content optimization</li>
          </ul>
        </div>

        <div style="background: var(--card); border: 1px solid var(--border); border-radius: 14px; padding: 24px; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);">
          <h3 style="color: var(--primary); margin-bottom: 16px;">üî¨ Researchers & Developers</h3>
          <p style="color: var(--text); margin-bottom: 16px;">Advanced tools for technical work, diagram analysis, and research documentation. Essential for scientists, engineers, and software developers.</p>
          <ul style="color: var(--muted); margin: 16px 0 0 20px;">
            <li>Technical diagram analysis</li>
            <li>Research documentation</li>
            <li>Problem decomposition</li>
            <li>Solution verification</li>
          </ul>
        </div>
      </div>

      <div style="background: var(--card); border: 1px solid var(--border); border-radius: 14px; padding: 24px; margin-bottom: 40px; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);">
        <h3 style="color: var(--primary); margin-bottom: 20px;">‚ùì Frequently Asked Questions About Quiz Solver</h3>
        <div style="display: grid; gap: 20px;">
          <div style="border-left: 3px solid var(--primary); padding-left: 16px;">
            <h4 style="color: var(--text); margin: 0 0 8px 0;">Q: How accurate are the Quiz Solver solutions?</h4>
            <p style="color: var(--text); margin: 0;">A: Our tool uses Google's advanced Gemini AI models which provide highly accurate solutions. The AI is trained on vast amounts of educational content and can handle complex problems across multiple subjects with step-by-step explanations.</p>
          </div>
          <div style="border-left: 3px solid var(--primary); padding-left: 16px;">
            <h4 style="color: var(--text); margin: 0 0 8px 0;">Q: What file formats are supported for image uploads?</h4>
            <p style="color: var(--text); margin: 0;">A: Quiz Solver supports all major image formats including JPG, PNG, WebP, and GIF. For best results, use clear, well-lit images with good contrast. We recommend keeping file sizes under 10MB for optimal performance.</p>
          </div>
          <div style="border-left: 3px solid var(--primary); padding-left: 16px;">
            <h4 style="color: var(--text); margin: 0 0 8px 0;">Q: Can I use Quiz Solver offline?</h4>
            <p style="color: var(--text); margin: 0;">A: Quiz Solver requires an internet connection to access Google's Gemini AI services. However, OCR processing happens locally in your browser, and once you have a solution, you can work with it offline.</p>
          </div>
          <div style="border-left: 3px solid var(--primary); padding-left: 16px;">
            <h4 style="color: var(--text); margin: 0 0 8px 0;">Q: How do I choose the right mode for my problem?</h4>
            <p style="color: var(--text); margin: 0;">A: Use Auto mode for most problems - it automatically selects the best approach. Use Vision mode for diagrams and visual problems, OCR mode for handwritten text, and Text mode for typed questions. The tool will guide you to the optimal choice.</p>
          </div>
          <div style="border-left: 3px solid var(--primary); padding-left: 16px;">
            <h4 style="color: var(--text); margin: 0 0 8px 0;">Q: Can I use Quiz Solver for commercial projects?</h4>
            <p style="color: var(--text); margin: 0;">A: Absolutely! Quiz Solver is free for personal, educational, and commercial use. There are no licensing restrictions or usage limitations. It's perfect for businesses, educational institutions, and professional development.</p>
          </div>
        </div>
      </div>

      <div style="background: var(--card); border: 1px solid var(--border); border-radius: 14px; padding: 24px; text-align: center; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);">
        <h3 style="color: var(--primary); margin-bottom: 16px;">üöÄ Ready to Solve Any Problem?</h3>
        <p style="color: var(--text); margin-bottom: 20px; font-size: 1.1rem;">Join thousands of students, professionals, and researchers who trust Quiz Solver for their daily problem-solving needs. Experience the power of AI-assisted learning and problem analysis.</p>
        <div style="display: flex; gap: 16px; justify-content: center; flex-wrap: wrap;">
          <a class="btn primary" href="#top">Start Solving Now</a>
          <a class="btn" href="guides/quiz-solver.html">Read Detailed Guide</a>
        </div>
      </div>
    </section>
  </main>

<script>
  /* ========= CONFIG ========= */
  // üîë Gemini key yahan rakhein (UI me kahi nazar nahi aayegi)
  const GEMINI_API_KEY = "AIzaSyDovzwxINfexpKQZC5K1TItqkhR-wp07yE";

  // Models (Vision + Text). 1.5-flash is fast & handles images.
  const GEMINI_VISION_MODEL = "gemini-1.5-flash";
  const GEMINI_TEXT_MODEL   = "gemini-1.5-flash"; // text also fine with flash

  /* ========= ELEMENTS ========= */
  const textInput = document.getElementById("textInput");
  const fileInput = document.getElementById("fileInput");
  const preview   = document.getElementById("preview");
  const modeSel   = document.getElementById("mode");
  const imgBadge  = document.getElementById("imgBadge");
  const ocrBadge  = document.getElementById("ocrBadge");
  const modelBadge= document.getElementById("modelBadge");

  const ocrTextEl = document.getElementById("ocrText");
  const answerEl  = document.getElementById("answer");

  let imageFile = null;
  let imageDataURL = null;

  /* ========= HELPERS ========= */
  function setBadges({img, ocr, model}){
    if (img !== undefined)   imgBadge.textContent   = "Image: " + img;
    if (ocr !== undefined)   ocrBadge.textContent   = "OCR: " + ocr;
    if (model !== undefined) modelBadge.textContent = "Gemini: " + model;
  }

  function readFileAsDataURL(file){
    return new Promise((resolve, reject)=>{
      const fr = new FileReader();
      fr.onload = ()=> resolve(fr.result);
      fr.onerror = reject;
      fr.readAsDataURL(file);
    });
  }

  async function ocrImageToText(file){
    setBadges({ocr: "running‚Ä¶"});
    const { data: { text } } = await Tesseract.recognize(file, 'eng');
    setBadges({ocr: "done"});
    return (text || "").trim();
  }

  function extractMimeAndBase64(dataURL){
    const m = dataURL.match(/^data:(.+);base64,(.*)$/);
    if (!m) return null;
    return { mime: m[1], b64: m[2] };
  }

  function renderMath() {
    if (window.MathJax && window.MathJax.typesetPromise) {
      window.MathJax.typesetPromise([answerEl]).catch(()=>{});
    }
  }

  /* ========= GEMINI CALLS ========= */
  async function askGeminiWithText(promptText){
    setBadges({model:"thinking‚Ä¶"});
    const body = {
      contents: [{
        role: "user",
        parts: [{ text: buildInstruction() + "\n\nQUESTION:\n" + promptText }]
      }],
      generationConfig: { temperature: 0.2, maxOutputTokens: 1200 }
    };
    const endpoint = `https://generativelanguage.googleapis.com/v1beta/models/${GEMINI_TEXT_MODEL}:generateContent?key=${encodeURIComponent(GEMINI_API_KEY)}`;
    const res = await fetch(endpoint, { method:"POST", headers:{ "Content-Type":"application/json" }, body: JSON.stringify(body) });
    const raw = await res.text();
    if (!res.ok) throw new Error(raw || res.statusText);
    const data = JSON.parse(raw);
    const out = data?.candidates?.[0]?.content?.parts?.[0]?.text?.trim() || "";
    setBadges({model:"done"});
    return out;
  }

  async function askGeminiWithImageAndText(dataURL, extraText){
    setBadges({model:"thinking‚Ä¶"});
    const parsed = extractMimeAndBase64(dataURL);
    if (!parsed) throw new Error("Invalid image data.");

    const parts = [
      { text: buildInstruction() },
      {
        inline_data: {
          mime_type: parsed.mime,
          data: parsed.b64
        }
      }
    ];
    if (extraText && extraText.trim()) {
      parts.push({ text: "\nAdditional text:\n" + extraText.trim() });
    }

    const body = { contents: [{ role:"user", parts }], generationConfig: { temperature: 0.2, maxOutputTokens: 1400 } };
    const endpoint = `https://generativelanguage.googleapis.com/v1beta/models/${GEMINI_VISION_MODEL}:generateContent?key=${encodeURIComponent(GEMINI_API_KEY)}`;
    const res = await fetch(endpoint, { method:"POST", headers:{ "Content-Type":"application/json" }, body: JSON.stringify(body) });
    const raw = await res.text();
    if (!res.ok) throw new Error(raw || res.statusText);
    const data = JSON.parse(raw);
    const out = data?.candidates?.[0]?.content?.parts?.[0]?.text?.trim() || "";
    setBadges({model:"done"});
    return out;
  }

  function buildInstruction(){
    return `You are a meticulous math & science tutor who excels at explaining diagrams and visual problems.

IMPORTANT: If a diagram is present, ALWAYS start by:
1. Describing what you see in the diagram in simple terms
2. Identifying key elements, shapes, measurements, or labels
3. Explaining the relationships between different parts
4. Then solve the problem step by step

For diagrams, be especially thorough:
- Point out obvious and hidden details
- Use simple language that a student can understand
- If it's a geometry problem, mention angles, sides, shapes
- If it's a graph, explain axes, points, trends
- If it's a physics diagram, identify forces, directions, components

General solving approach:
- Show working, formulas, and final answer
- Use LaTeX for math expressions where natural, e.g., $a^2+b^2=c^2$
- If information is missing, state assumptions explicitly before solving
- Keep explanations clear and educational`;
  }

  /* ========= EVENTS ========= */
  fileInput.addEventListener("change", async (e)=>{
    imageFile = e.target.files?.[0] || null;
    if (!imageFile) {
      preview.src = ""; preview.alt = "";
      imageDataURL = null;
      setBadges({img:"none"});
      return;
    }
    imageDataURL = await readFileAsDataURL(imageFile);
    preview.src = imageDataURL;
    preview.alt = "preview";
    setBadges({img: imageFile.name});
  });

  document.getElementById("btnClear").addEventListener("click", ()=>{
    textInput.value = "";
    fileInput.value = "";
    preview.src = ""; preview.alt = "";
    imageFile = null; imageDataURL = null;
    ocrTextEl.textContent = "‚Äì";
    answerEl.textContent = "‚ö° Your solution will appear here‚Ä¶";
    setBadges({img:"none", ocr:"idle", model:"idle"});
  });

  document.getElementById("btnCopy").addEventListener("click", async ()=>{
    try {
      await navigator.clipboard.writeText(answerEl.textContent.trim());
      alert("Answer copied!");
    } catch { alert("Copy failed."); }
  });

  document.getElementById("btnSolve").addEventListener("click", async ()=>{
    try{
      answerEl.textContent = "‚è≥ Solving‚Ä¶";
      setBadges({model:"preparing‚Ä¶"});

      const mode = modeSel.value;
      const hasImg = !!imageDataURL;
      const pasted = (textInput.value || "").trim();

      let finalAnswer = "";
      let ocrOut = "";

      if (mode === "text" || (!hasImg && mode === "auto")) {
        // TEXT ONLY
        if (!pasted) { answerEl.textContent = "‚ùå Please paste the question or upload an image."; return; }
        finalAnswer = await askGeminiWithText(pasted);
      }
      else if (mode === "vision" || (hasImg && mode === "auto")) {
        // VISION DIRECT (image reasoning)
        finalAnswer = await askGeminiWithImageAndText(imageDataURL, pasted);
      }
      else if (mode === "ocr") {
        if (!hasImg) { answerEl.textContent = "‚ùå Please upload an image for OCR mode."; return; }
        ocrTextEl.textContent = "‚è≥ OCR running‚Ä¶";
        ocrOut = await ocrImageToText(imageFile);
        ocrTextEl.textContent = ocrOut || "‚Äì";
        const combined = (pasted ? pasted + "\n\n" : "") + (ocrOut || "");
        if (!combined.trim()) { answerEl.textContent = "‚ùå No readable text found."; return; }
        finalAnswer = await askGeminiWithText(combined);
      }

      answerEl.textContent = finalAnswer || "‚ö†Ô∏è No answer generated.";
      renderMath(); // typeset LaTeX if any
    } catch(err){
      console.error(err);
      answerEl.textContent = "‚ö†Ô∏è Error: " + (err?.message || err);
    }
  });


</script>
</body>
</html>
